<div>
    <div style="margin-bottom: 16px;">
        <div style="margin-bottom: 8px;">Field</div>
        <nz-select [(ngModel)]="filter.field" style="width: 100%;" nzShowSearch nzPlaceHolder="Select field">
            @if (cubeMeta) {
                @if (cubeMeta.dimensions.length) {
                    <nz-option-group nzLabel="Dimensions">
                        @for (dim of cubeMeta.dimensions; track dim.code) {
                            @if (!dim.hidden) {
                                <nz-option [nzLabel]="dim.title" [nzValue]="dim.code"></nz-option>
                            }
                        }
                    </nz-option-group>
                }
                @if (cubeMeta.parameters.length) {
                    <nz-option-group nzLabel="Parameters">
                        @for (parameter of cubeMeta.parameters; track parameter.code) {
                            <nz-option [nzLabel]="parameter.title" [nzValue]="parameter.code"></nz-option>
                        }
                    </nz-option-group>
                }
            }
        </nz-select>
    </div>

    @if (filter.field) {
        <div style="margin-bottom: 16px;">
            <div style="margin-bottom: 8px;">Control</div>
            <nz-select [(ngModel)]="filter.control" style="width: 100%;">
                @switch (fieldType()) {
                    @case (FieldType.STRING) {
                        @if (filter.operator == CubeOperator.IN || filter.operator == CubeOperator.NOT_IN) {
                            <nz-option [nzLabel]="FilterControl.MULTI_SELECT"
                                       [nzValue]="FilterControl.MULTI_SELECT"></nz-option>
                            <nz-option [nzLabel]="FilterControl.CHECKBOX"
                                       [nzValue]="FilterControl.CHECKBOX"></nz-option>
                        } @else {
                            <nz-option [nzLabel]="FilterControl.SINGLE_SELECT"
                                       [nzValue]="FilterControl.SINGLE_SELECT"></nz-option>
                            <nz-option [nzLabel]="FilterControl.RADIO" [nzValue]="FilterControl.RADIO"></nz-option>
                        }
                    }
                    @case (FieldType.NUMBER) {

                    }
                    @case (FieldType.DATE_TIME) {

                    }
                }
            </nz-select>
        </div>

        @if (fieldInDimension()) {
            <div style="margin-bottom: 16px;">
                <div style="margin-bottom: 8px;">Operator</div>
                <nz-select [(ngModel)]="filter.operator" style="width: 100%;">
                    @for (op of operators; track op.value) {
                        <nz-option [nzLabel]="op.label | translate" [nzValue]="op.value"></nz-option>
                    }
                </nz-select>
            </div>
        }
    }

    @if (filter.control) {
        <div style="margin-bottom: 8px;">
            <div style="margin-bottom: 8px;">Default Value</div>
            <cube-puzzle-filter-control [dashboard]="dashboard" [filter]="filter"
                                        [cubeMeta]="cubeMeta"></cube-puzzle-filter-control>
        </div>
    }
</div>
