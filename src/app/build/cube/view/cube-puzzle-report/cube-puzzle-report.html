<nz-card [nzBordered]="false" [nzTitle]="report.title" nzSize="small"
         style="height: 100%;width: 100%;margin-bottom: 0"
         [nzBodyStyle]="{height: 'calc(100% - ' + (report.title ? 38 : 0) + 'px)', background: report.ui['background'] || 'transparent'}">
    <nz-spin [nzSpinning]="querying" style="height: 100%;width: 100%">
        <div [hidden]="report.type === ReportType.TABLE || report.type === ReportType.KPI" #chartContainer
             style="height: 100%;width: 100%;overflow: hidden">
        </div>
        @if (report.type === ReportType.KPI) {
            <div style="height: 100%; display: flex; align-items: center; justify-content: center;overflow: hidden">
                @if (chartData && chartData.length > 0) {
                    <span [style.font-size]="(report.ui['fontSize'] || 22) + 'px'"
                          [style.color]="report.ui['color'] || '#000'">
                        {{ chartData[0][report.cube[CubeKey.yField] + ''] }}
                    </span>
                }
            </div>
        }
        @if (report.type === ReportType.TABLE) {
            <div style="height: 100%; overflow: auto;">
                <nz-table [nzData]="chartData" [nzFrontPagination]="false"
                          [nzShowPagination]="false" nzSize="small">
                    <thead>
                    <tr>
                        @for (col of (report.cube[CubeKey.xField] || []); track col) {
                            <th>{{ col }}</th>
                        }
                        @for (col of (report.cube[CubeKey.yField] || []); track col) {
                            <th>{{ col }}</th>
                        }
                    </tr>
                    </thead>
                    <tbody>
                        @for (row of chartData; track $index) {
                            <tr>
                                @for (col of (report.cube[CubeKey.xField] || []); track col) {
                                    <td>{{ row[col] }}</td>
                                }
                                @for (col of (report.cube[CubeKey.yField] || []); track col) {
                                    <td>{{ row[col] }}</td>
                                }
                            </tr>
                        }
                    </tbody>
                </nz-table>
            </div>
        }
    </nz-spin>
</nz-card>
