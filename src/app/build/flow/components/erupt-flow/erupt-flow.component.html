<div class="flow">
  <div class="operation">
    @if (progress) {
      <div style="zoom: .6">
        @for (ft of FlowTurn | enumToArray; track ft) {
          <div [ngClass]="ft" style="padding: 6px;margin-bottom: 16px">
            {{ft | translate}}
          </div>
        }
      </div>
    }
    <div class="operation-zoom">
      <button nz-button nzSize="small" (click)="doZoom(-1)">
        <span nz-icon nzType="minus"></span>
      </button>
      <span class="zoom-text">{{ (scale * 100) | number:'1.0-0' }}%</span>
      <button nz-button nzSize="small" (click)="doHit()" title="重置视图">
        <span nz-icon nzType="reload"></span>
      </button>
      <button nz-button nzSize="small" (click)="doZoom(1)">
        <span nz-icon nzType="plus"></span>
      </button>
    </div>
  </div>
  <div #canvasContainer class="canvas-container" style="width: 100%;height: 100%;position: relative;">
    <div class="process" id="flow-canvas">
      @for (node of modelValue; track node; let i = $index) {
        <app-recursive-node
          #node
          [readonly]="readonly"
          [eruptBuild]="eruptBuild"
          [node]="node"
          [branch]="modelValue"
          [progress]="progress"
          [index]="i"
          (nodeChange)="modelValue[i] = $event; modelValueChange.emit(modelValue)"
          (select)="selectNode($event)">
        </app-recursive-node>
      }
    </div>
  </div>
</div>
