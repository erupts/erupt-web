@node-width: 200px;
@node-line-width: 2px;
@node-line-color: #d9d9d9;
@main-bgc: #f5f5f5;

.p-gateway {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;

  .p-gateway-add {
    z-index: 2;
    top: -16px;
    position: absolute;
  }
}

.p-branch {
  display: flex;
  position: relative;
  justify-content: center;
  background: @main-bgc;

  // 再画一个横线连接所有支路
  &:before {
    content: '';
    width: calc(100% - @node-width);
    background: @node-line-color;
    position: absolute;
    height: @node-line-width;
  }

  &:after {
    content: '';
    width: calc(100% - @node-width);
    background: @node-line-color;
    position: absolute;
    height: @node-line-width;
    bottom: 0;
  }

  .p-branch-item {
    position: relative;
    padding: 0 60px;
    display: flex;
    justify-content: center;

    & > div {
      z-index: 1; // 防止连线跑到它上面
      margin-top: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;

      & > .p-node:last-child {
        :deep(.p-node-add) {
          // 分支最后一个节点要去除箭头，影响美观
          &:after {
            display: none !important;
          }
        }
      }
    }

    &:before {
      content: '';
      position: absolute;
      background: @node-line-color;
      height: 100%;
      width: @node-line-width;
    }
  }

  .p-branch-item-l, .p-branch-item-r {
    &:after {
      // 当分支不是偶数时，需要一个遮罩线
      content: '';
      position: absolute;
      height: @node-line-width;
      width: 50%;
      top: 0;
      background: @main-bgc;
    }

    & > div {
      &:before {
        // 当分支不是偶数时，需要一个遮罩线
        content: '';
        position: absolute;
        height: @node-line-width;
        width: 50%;
        bottom: 0;
        background: @main-bgc;
      }
    }
  }

  :deep(.p-branch-end .p-node-add) {
    // 分支最后一个节点要去除箭头，影响美观
    &:after {
      display: none !important;
    }
  }
}
