<div nz-row [nzGutter]="16">
    <form nz-form [nzLayout]="layout" se-container style="width: 100%" class="erupt-form">
        @for (field of eruptModel.eruptFieldModels; track field) {
            <ng-template #inputSe>
                <se [label]="field.eruptFieldJson.edit.title"
                    [required]="field.eruptFieldJson.edit.notNull"
                    [optionalHelp]="field.eruptFieldJson.edit.desc">
                    @if (field.eruptFieldJson.edit.inputType.prefix.length == 0 && field.eruptFieldJson.edit.inputType.suffix.length == 0) {
                        <nz-input-wrapper class="erupt-input" nzAllowClear>
                            @if (supportCopy) {
                                <div nzInputAddonBefore>
                                    <span nz-icon nzType="copy" (click)="copy(field.eruptFieldJson.edit.$value)"
                                      style="cursor: pointer" nzTheme="outline"></span>
                                </div>
                            }
                            <input nz-input [nzSize]="size" autocomplete="off" nz-tooltip
                                   nzTooltipTrigger="focus"
                                   nzTooltipPlacement="topLeft"
                                   [nzTooltipTitle]="field.eruptFieldJson.edit.$value"
                                   [type]="field.eruptFieldJson.edit.inputType.type"
                                   [maxLength]="field.eruptFieldJson.edit.inputType.length"
                                   [(ngModel)]="field.eruptFieldJson.edit.$value"
                                   [name]="field.fieldName"
                                   [placeholder]="field.eruptFieldJson.edit.placeHolder"
                                   [disabled]="isReadonly(field)">
                        </nz-input-wrapper>

                    }
                    @if (field.eruptFieldJson.edit.inputType.prefix.length > 0 ||
                    field.eruptFieldJson.edit.inputType.suffix.length > 0) {
                        <nz-input-wrapper
                            class="erupt-input">
                            <input nz-input autocomplete="off"
                                   [type]="field.eruptFieldJson.edit.inputType.type"
                                   [maxLength]="field.eruptFieldJson.edit.inputType.length"
                                   [placeholder]="field.eruptFieldJson.edit.placeHolder"
                                   [(ngModel)]="field.eruptFieldJson.edit.$value"
                                   [name]="field.fieldName"
                                   [disabled]="isReadonly(field)">
                            <div nzInputAddonBefore>
                                @if (field.eruptFieldJson.edit.inputType.prefix.length == 1) {
                                    {{ field.eruptFieldJson.edit.inputType.prefix[0].label }}
                                }
                                @if (field.eruptFieldJson.edit.inputType.prefix.length > 1) {
                                    <nz-select [(ngModel)]="field.eruptFieldJson.edit.inputType.prefixValue"
                                               [name]="field.fieldName+'before'" style="min-width: 70px;">
                                        @for (vl of field.eruptFieldJson.edit.inputType.prefix; track vl) {
                                            <nz-option [nzLabel]="vl.label" [nzValue]="vl.value"></nz-option>
                                        }
                                    </nz-select>
                                }
                            </div>
                            <div nzInputAddonAfter>
                                @if (field.eruptFieldJson.edit.inputType.suffix.length == 1) {
                                    {{ field.eruptFieldJson.edit.inputType.suffix[0]['label'] }}
                                }
                                @if (field.eruptFieldJson.edit.inputType.suffix.length > 1) {
                                    <nz-select [(ngModel)]="field.eruptFieldJson.edit.inputType.suffixValue"
                                               [name]="field.fieldName+'after'" style="min-width: 70px;">
                                        @for (vl of field.eruptFieldJson.edit.inputType.suffix; track vl) {
                                            <nz-option [nzLabel]="vl.label" [nzValue]="vl.value"></nz-option>
                                        }
                                    </nz-select>
                                }
                            </div>
                        </nz-input-wrapper>
                    }
                </se>
            </ng-template>
            <ng-template #choiceTpl>
                <se [label]="field.eruptFieldJson.edit.title"
                    [required]="field.eruptFieldJson.edit.notNull"
                    [optionalHelp]="field.eruptFieldJson.edit.desc">
                    <erupt-choice [eruptModel]="eruptModel" [eruptField]="field" [size]="size"
                                  [eruptParentName]="parentEruptName" [editType]="this"
                                  [readonly]="isReadonly(field)">
                    </erupt-choice>
                </se>
            </ng-template>
            <ng-template #multiChoiceTpl>
                <se [label]="field.eruptFieldJson.edit.title"
                    [required]="field.eruptFieldJson.edit.notNull"
                    [optionalHelp]="field.eruptFieldJson.edit.desc">
                    <erupt-multi-choice [eruptModel]="eruptModel" [eruptField]="field" [size]="size"
                                        [eruptParentName]="parentEruptName"
                                        [readonly]="isReadonly(field)">
                    </erupt-multi-choice>
                </se>
            </ng-template>
            @if (field.eruptFieldJson.edit && field.eruptFieldJson.edit.show && field.eruptFieldJson.edit.title) {
                @switch (field.eruptFieldJson.edit.type) {
                    @case (editType.INPUT) {
                        @if (field.eruptFieldJson.edit.inputType.fullSpan) {
                            <div nz-col [nzSpan]="24">
                                <ng-container [ngTemplateOutlet]="inputSe"></ng-container>
                            </div>
                        }
                        @if (!field.eruptFieldJson.edit.inputType.fullSpan) {
                            <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md"
                                 [nzLg]="col.lg" [nzXl]="col.xl" [nzXXl]="col.xxl">
                                <ng-container [ngTemplateOutlet]="inputSe"></ng-container>
                            </div>
                        }
                    }
                    <!-- number-->
                    @case (editType.NUMBER) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md"
                             [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <nz-input-number class="erupt-input" [nzSize]="size"
                                                 [nzDisabled]="isReadonly(field)"
                                                 [(ngModel)]="field.eruptFieldJson.edit.$value"
                                                 [nzPlaceHolder]="field.eruptFieldJson.edit.placeHolder"
                                                 [name]="field.fieldName"
                                                 [nzMin]="field.eruptFieldJson.edit.numberType.min"
                                                 [nzMax]="field.eruptFieldJson.edit.numberType.max"
                                                 [nzStep]="1"></nz-input-number>
                            </se>
                        </div>
                    }
                    <!--COLOR-->
                    @case (editType.COLOR) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md"
                             [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <nz-input-wrapper class="erupt-input" nzAllowClear>
                                    <input nz-input [nzSize]="size" autocomplete="off" nz-tooltip
                                           nzTooltipTrigger="focus"
                                           nzTooltipPlacement="topLeft"
                                           type="color"
                                           [(ngModel)]="field.eruptFieldJson.edit.$value"
                                           [name]="field.fieldName"
                                           [placeholder]="field.eruptFieldJson.edit.placeHolder"
                                           [disabled]="isReadonly(field)">
                                </nz-input-wrapper>
                            </se>
                        </div>
                    }
                    <!--text area-->
                    @case (editType.TEXTAREA) {
                        <div nz-col [nzSpan]="24">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                <textarea nz-input class="erupt-input" [name]="field.fieldName"
                          [nzAutosize]="{ minRows: 3, maxRows: 20 }"
                          [(ngModel)]="field.eruptFieldJson.edit.$value"
                          [placeholder]="field.eruptFieldJson.edit.placeHolder"
                          [disabled]="isReadonly(field)"
                ></textarea>
                            </se>
                        </div>
                    }
                    @case (editType.MARKDOWN) {
                        <div nz-col [nzSpan]="24">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <erupt-markdown [eruptField]="field" [erupt]="eruptModel"
                                                [readonly]="isReadonly(field)"></erupt-markdown>
                            </se>
                        </div>
                    }
                    <!--choice-->
                    @case (editType.CHOICE) {
                        @switch (field.eruptFieldJson.edit.choiceType.type) {
                            @case (choiceEnum.RADIO) {
                                <div nz-col [nzXs]="24">
                                    <ng-container [ngTemplateOutlet]="choiceTpl"></ng-container>
                                </div>
                            }
                            @case (choiceEnum.SELECT) {
                                <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md"
                                     [nzLg]="col.lg"
                                     [nzXl]="col.xl"
                                     [nzXXl]="col.xxl">
                                    <ng-container [ngTemplateOutlet]="choiceTpl"></ng-container>
                                </div>
                            }
                        }
                    }
                    <!--multi-choice-->
                    @case (editType.MULTI_CHOICE) {
                        @switch (field.eruptFieldJson.edit.multiChoiceType.type) {
                            @case (multiChoiceEnum.CHECKBOX) {
                                <div nz-col [nzXs]="24">
                                    <ng-container [ngTemplateOutlet]="multiChoiceTpl"></ng-container>
                                </div>
                            }
                            @case (multiChoiceEnum.SELECT) {
                                <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md"
                                     [nzLg]="col.lg"
                                     [nzXl]="col.xl"
                                     [nzXXl]="col.xxl">
                                    <ng-container [ngTemplateOutlet]="multiChoiceTpl"></ng-container>
                                </div>
                            }
                        }
                    }
                    @case (editType.TAGS) {
                        <div nz-col [nzSpan]="24">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <nz-select [nzAllowClear]='!field.eruptFieldJson.edit.notNull'
                                           [nzDisabled]="isReadonly(field)"
                                           [nzSize]="size" [(ngModel)]="field.eruptFieldJson.edit.$value"
                                           [name]="field.fieldName"
                                           [nzPlaceHolder]="field.eruptFieldJson.edit.placeHolder"
                                           [nzTokenSeparators]="[field.eruptFieldJson.edit.tagsType.joinSeparator]"
                                           [nzMaxMultipleCount]="field.eruptFieldJson.edit.tagsType.maxTagCount"
                                           [nzMode]="field.eruptFieldJson.edit.tagsType.allowExtension?'tags':'multiple'">
                                    @for (item of field.componentValue; track item) {
                                        <nz-option [nzLabel]="item"
                                                   [nzValue]="item"></nz-option>
                                    }
                                </nz-select>
                            </se>
                        </div>
                    }
                    @case (editType.CHECKBOX) {
                        <div nz-col [nzSpan]="24">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <erupt-checkbox [eruptBuildModel]="eruptBuildModel" [onlyRead]="isReadonly(field)"
                                                [eruptFieldModel]="field" style="max-height: 20px"></erupt-checkbox>
                            </se>
                        </div>
                    }
                    @case (editType.SLIDER) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl" [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <nz-slider class="erupt-input"
                                           [(ngModel)]="field.eruptFieldJson.edit.$value"
                                           [nzMarks]="field.eruptFieldJson.edit.sliderType.marks"
                                           [nzDots]="field.eruptFieldJson.edit.sliderType.dots"
                                           [nzStep]="field.eruptFieldJson.edit.sliderType.step"
                                           [name]="field.fieldName"
                                           [nzMax]="field.eruptFieldJson.edit.sliderType.max"
                                           [nzMin]="field.eruptFieldJson.edit.sliderType.min"
                                           [nzDisabled]="isReadonly(field)"></nz-slider>
                            </se>
                        </div>
                    }
                    @case (editType.RATE) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl" [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <nz-rate [(ngModel)]="field.eruptFieldJson.edit.$value"
                                         [nzAllowClear]="!field.eruptFieldJson.edit.notNull"
                                         [nzCharacter]="field.eruptFieldJson.edit.rateType.character&&characterIcon"
                                         [nzDisabled]="isReadonly(field)"
                                         [nzCount]="field.eruptFieldJson.edit.rateType.count"
                                         [name]="field.fieldName"
                                         [nzAllowHalf]="field.eruptFieldJson.edit.rateType.allowHalf">
                                    <ng-template #characterIcon>
                                        <span>{{ field.eruptFieldJson.edit.rateType.character }}</span>
                                    </ng-template>
                                </nz-rate>
                            </se>
                        </div>
                    }
                    <!--date-->
                    @case (editType.DATE) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title" [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <erupt-date [field]="field" [size]="size" [readonly]="isReadonly(field)"></erupt-date>
                            </se>
                        </div>
                    }
                    <!--reference-->
                    @case (editType.REFERENCE_TREE) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <erupt-reference [eruptModel]="eruptModel" [field]="field" [size]="size"
                                                 [readonly]="isReadonly(field)"
                                                 [parentEruptName]="parentEruptName"></erupt-reference>
                            </se>
                        </div>
                    }
                    @case (editType.REFERENCE_TABLE) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <erupt-reference [eruptModel]="eruptModel" [field]="field" [size]="size"
                                                 [readonly]="isReadonly(field)"
                                                 [parentEruptName]="parentEruptName"></erupt-reference>
                            </se>
                        </div>
                    }
                    <!--bool-->
                    @case (editType.BOOLEAN) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <nz-radio-group [(ngModel)]="field.eruptFieldJson.edit.$value"
                                                [name]="field.fieldName" [nzSize]="size"
                                                [nzDisabled]="isReadonly(field)"
                                                class="erupt-input">
                                    <div nz-row>
                                        <div nz-col [nzSpan]="12">
                                            <label nz-radio [nzValue]="true"
                                                   class="ellipsis-radio stander-line-height">
                                                {{ field.eruptFieldJson.edit.boolType.trueText | translate }}
                                            </label>
                                        </div>
                                        <div nz-col [nzSpan]="12">
                                            <label nz-radio [nzValue]="false"
                                                   class="ellipsis-radio stander-line-height">
                                                {{ field.eruptFieldJson.edit.boolType.falseText | translate }}
                                            </label>
                                        </div>
                                    </div>
                                </nz-radio-group>
                            </se>
                        </div>
                    }
                    @case (editType.ATTACHMENT) {
                        <div nz-col [nzSpan]="24">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                @switch (field.eruptFieldJson.edit.attachmentType.type) {
                                    @case (attachmentEnum.IMAGE) {
                                        <nz-upload nzListType="picture-card"
                                                   [nzAccept]="['.bmp','.jpg','.jpeg','.png','.gif','.webp','.heic','.avif','.svg']"
                                                   [nzDisabled]="isReadonly(field)"
                                                   [nzMultiple]="false"
                                                   [(nzFileList)]="field.eruptFieldJson.edit.$viewValue"
                                                   [nzLimit]="field.eruptFieldJson.edit.attachmentType.maxLimit"
                                                   (nzChange)="upLoadNzChange($event,field)"
                                                   [nzPreview]="previewImageHandler"
                                                   [nzShowButton]="field.eruptFieldJson.edit.$viewValue&&field.eruptFieldJson.edit.$viewValue.length!=field.eruptFieldJson.edit.attachmentType.maxLimit|| field.eruptFieldJson.edit.attachmentType.maxLimit==0"
                                                   [nzHeaders]="{token:tokenService.get().token,erupt:eruptModel.eruptName,eruptParent:parentEruptName||''}"
                                                   [nzAction]="dataService.upload+this.eruptModel.eruptName+'/'+field.fieldName">
                                            <p class="ant-upload-drag-icon">
                                                <i nz-icon nzType="plus"></i>
                                            </p>
                                        </nz-upload>
                                    }
                                    @case (attachmentEnum.BASE) {
                                        @if (field.eruptFieldJson.edit.$viewValue) {
                                            <nz-upload nzType="drag"
                                                       [nzAccept]="uploadAccept(field.eruptFieldJson.edit.attachmentType.fileTypes)"
                                                       [nzLimit]="field.eruptFieldJson.edit.attachmentType.maxLimit"
                                                       [nzDisabled]="isReadonly(field)||field.eruptFieldJson.edit.$viewValue.length==field.eruptFieldJson.edit.attachmentType.maxLimit"
                                                       (nzChange)="upLoadNzChange($event,field)"
                                                       [(nzFileList)]="field.eruptFieldJson.edit.$viewValue"
                                                       [nzHeaders]="{token:tokenService.get().token, erupt:eruptModel.eruptName,eruptParent:parentEruptName||''}"
                                                       [nzAction]="dataService.upload+this.eruptModel.eruptName+'/'+field.fieldName">
                                                <p class="ant-upload-drag-icon">
                                                    <i nz-icon nzType="inbox"></i>
                                                </p>
                                                <p class="ant-upload-text">{{ 'component.attachment.upload_hint'|translate }}</p>
                                                @if (field.eruptFieldJson.edit.attachmentType.fileTypes.length > 0) {
                                                    <p class="ant-upload-hint"
                                                    >
                                                        {{ 'component.attachment.upload_format'|translate }}
                                                        ï¼š<span>{{ field.eruptFieldJson.edit.attachmentType.fileTypes.join("&nbsp; / &nbsp;") }}</span>
                                                    </p>
                                                }
                                                <p class="ant-upload-hint">{{ field.eruptFieldJson.edit.placeHolder }}</p>
                                            </nz-upload>
                                        }
                                    }
                                }
                            </se>
                        </div>
                    }
                    @case (editType.AUTO_COMPLETE) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                <erupt-auto-complete [size]="size" [field]="field" [parentEruptName]="parentEruptName"
                                                     [eruptModel]="eruptModel"></erupt-auto-complete>
                            </se>
                        </div>
                    }
                    @case (editType.HTML_EDITOR) {
                        <div nz-col [nzSpan]="24">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                @if (field.eruptFieldJson.edit.htmlEditorType.value === htmlEditorType.CKEDITOR) {
                                    <ckeditor [(value)]="field.eruptFieldJson.edit.$value"
                                              [readonly]="isReadonly(field)"
                                              [eruptField]="field" [erupt]="eruptModel"></ckeditor>
                                }
                                @if (field.eruptFieldJson.edit.htmlEditorType.value === htmlEditorType.UEDITOR) {
                                    <erupt-ueditor [eruptField]="field" [erupt]="eruptModel"
                                                   [readonly]="isReadonly(field)">
                                    </erupt-ueditor>
                                }
                            </se>
                        </div>
                    }
                    @case (editType.TPL) {
                        <div nz-col [nzSpan]="24">
                            <iframe
                                [src]="dataService.getFieldTplPath(eruptBuildModel.eruptModel.eruptName,field.fieldName) | safeUrl"
                                style="width:100%;border: none;vertical-align: bottom;"
                                (load)="iframeHeight($event)">
                            </iframe>
                        </div>
                    }
                    @case (editType.MAP) {
                        <div nz-col [nzSpan]="24">
                            <se [label]="field.eruptFieldJson.edit.title"
                                [required]="field.eruptFieldJson.edit.notNull"
                                [optionalHelp]="field.eruptFieldJson.edit.desc">
                                @if (!loading) {
                                    <amap [(value)]="field.eruptFieldJson.edit.$value"
                                          [mapType]="field.eruptFieldJson.edit.mapType"></amap>
                                }
                            </se>
                        </div>
                    }
                    @case (editType.EMPTY) {
                        <div nz-col [nzXs]="col.xs" [nzSm]="col.sm" [nzMd]="col.md" [nzLg]="col.lg"
                             [nzXl]="col.xl"
                             [nzXXl]="col.xxl">
                        </div>
                    }
                    @case (editType.COMBINE) {
                        <div nz-col [nzSpan]="24" style="margin-top: 8px">
                            <nz-collapse nzAccordion [nzExpandIconPosition]="'end'">
                                <nz-collapse-panel [nzActive]="true" [nzHeader]="field.eruptFieldJson.edit.title">
                                    <erupt-edit-type
                                        [eruptBuildModel]="{eruptModel:eruptBuildModel.combineErupts[field.fieldName]}"></erupt-edit-type>
                                </nz-collapse-panel>
                            </nz-collapse>
                        </div>
                    }
                    @case (editType.CODE_EDITOR) {
                        @if (!loading) {
                            <div nz-col [nzSpan]="24">
                                <se [label]="field.eruptFieldJson.edit.title"
                                    [required]="field.eruptFieldJson.edit.notNull"
                                    [optionalHelp]="field.eruptFieldJson.edit.desc">
                                    <erupt-code-editor [edit]="field.eruptFieldJson.edit"
                                                       [readonly]="isReadonly(field)"
                                                       [height]="field.eruptFieldJson.edit.codeEditType.height"
                                                       [language]="field.eruptFieldJson.edit.codeEditType.language">
                                    </erupt-code-editor>
                                </se>
                            </div>
                        }
                    }
                    @case (editType.SIGNATURE) {
                        @if (!loading) {
                            <div nz-col [nzSpan]="24">
                                <se [label]="field.eruptFieldJson.edit.title"
                                    [required]="field.eruptFieldJson.edit.notNull"
                                    [optionalHelp]="field.eruptFieldJson.edit.desc">
                                    <div style="width: 100%;height: 200px;border: 1px solid #d9d9d9;border-radius: 2px">
                                        @if (field.eruptFieldJson.edit.$value) {
                                            <img [src]="field.eruptFieldJson.edit.$value"
                                                 style="width: 100%;height: 100%;" alt="sign"/>
                                            <button nz-button nzType="default"
                                                    (click)="clearSign(field.eruptFieldJson.edit)" nzShape="circle"
                                                    style="position: absolute;right:16px;top: 16px">
                                                <span nz-icon nzType="clear" nzTheme="outline"></span>
                                            </button>
                                        }
                                        @if (!field.eruptFieldJson.edit.$value) {
                                            <button nz-button nzType="default"
                                                    (click)="openSign(field.eruptFieldJson.edit)" nzShape="circle"
                                                    style="position: absolute;;top: 45%;left: 50%;transform: translate(-50%);">
                                                <span nz-icon nzType="edit" nzTheme="outline"></span>
                                            </button>
                                        }
                                    </div>
                                </se>
                            </div>
                        }
                    }
                    @case (editType.DIVIDE) {
                        <div nz-col [nzSpan]="24" style="margin-bottom: 0">
                            <nz-divider [nzDashed]="false" [nzText]="field.eruptFieldJson.edit.title"></nz-divider>
                        </div>
                    }
                    @default {
                    }
                }
            }
        }
    </form>

    @if (eruptBuildModel.tabErupts) {
        <nz-tabset [nzType]="'card'" style="margin-top: 5px">
            @for (item of tabErupts; track item) {
                @if (eruptModel.eruptFieldModelMap.get(item.key).eruptFieldJson.edit.show) {
                    <nz-tab [nzTitle]="tabTitle"
                    >
                        @switch (eruptModel.eruptFieldModelMap.get(item.key).eruptFieldJson.edit.type) {
                            @case (editType.TAB_TABLE_ADD) {
                                <tab-table [onlyRead]="isReadonly(eruptModel.eruptFieldModelMap.get(item.key))"
                                           [tabErupt]="{eruptBuildModel:item.value,eruptFieldModel:eruptModel.eruptFieldModelMap.get(item.key)}"
                                           [eruptBuildModel]="eruptBuildModel"
                                ></tab-table>
                            }
                            @case (editType.TAB_TABLE_REFER) {
                                <tab-table [onlyRead]="isReadonly(eruptModel.eruptFieldModelMap.get(item.key))"
                                           [tabErupt]="{eruptBuildModel:item.value,eruptFieldModel:eruptModel.eruptFieldModelMap.get(item.key)}"
                                           [eruptBuildModel]="eruptBuildModel" [mode]="'refer-add'"
                                ></tab-table>
                            }
                            @case (editType.TAB_TREE) {
                                <erupt-tab-tree [eruptFieldModel]="eruptModel.eruptFieldModelMap.get(item.key)"
                                                [eruptBuildModel]="eruptBuildModel"
                                                [onlyRead]="isReadonly(eruptModel.eruptFieldModelMap.get(item.key))"
                                ></erupt-tab-tree>
                            }
                        }
                    </nz-tab>
                }
                <ng-template #tabTitle>
                    {{ eruptModel.eruptFieldModelMap.get(item.key).eruptFieldJson.edit.title }}
                    @if (eruptModel.eruptFieldModelMap.get(item.key).eruptFieldJson.edit.desc) {
                        <i nz-icon nzType="question-circle" nzTheme="outline" nz-tooltip
                           [nzTooltipTitle]="eruptModel.eruptFieldModelMap.get(item.key).eruptFieldJson.edit.desc"></i>
                    }
                </ng-template>
            }
        </nz-tabset>
    }
</div>
